
export EDITOR="emacs -nw"
export JAVA_HOME=/usr
export PATH=/usr/local/bin:/bin:/opt:$PATH

if [[ $(grep -c '^\[' ~/.aws/credentials) -gt 1 ]]; then
  CONFIG=$(grep -A5 '^\[fiftythree\]' ~/.aws/credentials)
else
  CONFIG=$(cat ~/.aws/config)
fi

# AWS Environment required by ansible
# See: http://docs.ansible.com/ec2_module.html
export AWS_DEFAULT_REGION="$(echo "$CONFIG" | tr " " "\n" | grep -A2 region | tail -1)"
export EC2_REGION="$AWS_DEFAULT_REGION"

# AWS Key info required by the AWS CLI tools
# See: http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-linux.html
export AWS_ACCESS_KEY="$(echo "$CONFIG" | tr " " "\n" | grep -A2 aws_access_key_id | tail -1)"
export AWS_SECRET_KEY="$(echo "$CONFIG" | tr " " "\n" | grep -A2 aws_secret_access_key | tail -1)"

# Some programs, expect different ENV names for AWS credentials.
# This is just a duplicate of above with different variable names set.
export AWS_ACCESS_KEY_ID="$AWS_ACCESS_KEY"
export AWS_SECRET_ACCESS_KEY="$AWS_SECRET_KEY"
